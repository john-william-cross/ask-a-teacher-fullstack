{"ast":null,"code":"var _jsxFileName = \"/Users/johncross/Desktop/10xCodeCamp/ask-a-teacher-fullstack/client/src/component/pages/Questions.js\";\nimport React from \"react\";\nimport Header from \"../ui/Header\";\nimport Footer from \"../ui/Footer\";\nimport orderBy from \"lodash/orderBy\";\nimport QuestionPreview from \"../ui/QuestionPreview\";\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport actions from \"../../store/actions\"; // import allQuestions from \"../../store/reducers/allQuestions\";\n\nclass Questions extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      order: `[[\"createdAt\"], [\"desc\"]]`,\n      displayedQuestions: [],\n      allQuestions: []\n    };\n  } //TODO: CREATE LOGOUT BUTTON ON ALL PAGES EXCEPT LANDING MAYBE\n\n\n  componentDidMount() {\n    axios.get(\"http://localhost:3040/api/v1/questions?order=%60questions%60.%60created_at%60%20DESC\").then(res => {\n      // handle success\n      const questions = res.data;\n      console.log(`here are the questions: `, questions);\n      console.log(\"STORE ALL QUESTIONS\", actions.STORE_ALL_QUESTIONS);\n      this.props.dispatch({\n        type: actions.STORE_ALL_QUESTIONS,\n        payload: questions\n      }); //this loads the questions\n\n      this.setState({\n        displayedQuestions: orderBy(this.props.allQuestions, '[[\"totalAnswers\"], [\"asc\"]]'),\n        allQuestions: this.props.allQuestions.map(question => {\n          return {\n            totalAnswers: question.answers.length,\n            ...question\n          };\n        })\n      });\n    }).catch(error => {\n      // handle error\n      console.log(error);\n    });\n  } //REMEMBER THAT STATE IS ALWAYS AN OBJECT\n\n\n  setOrder(e) {\n    const newOrder = e.target.value; // '[(question) => {return question.answers.length}, [\"asc\"]]'\n\n    console.log(newOrder);\n    const parsedNewOrder = JSON.parse(newOrder);\n    console.log(parsedNewOrder);\n    this.setState({\n      order: newOrder\n    }, () => {\n      this.setState({\n        displayedQuestions: orderBy(this.state.allQuestions, ...parsedNewOrder // [(question) => {return question.answers.length}, [\"asc\"]]\n        )\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mb-9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row no-gutters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-10 offset-md-1 col-lg-8 offset-lg-2 col-xl-8 offset-xl-2 mt-9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 mt-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 22\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"float-left top-questions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 25\n      }\n    }, \"Top Questions\"), /*#__PURE__*/React.createElement(\"select\", {\n      value: this.state.order,\n      className: \"float-right dropdown col-5 form-control pl-0 form-control-lg\",\n      onChange: e => this.setOrder(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"[[\\\"createdAt\\\"], [\\\"asc\\\"]]\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 28\n      }\n    }, \"Newest\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"[[\\\"totalAnswers\\\"], [\\\"asc\\\"]]\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 28\n      }\n    }, \"Unanswered\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clearfix\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 25\n      }\n    }), this.state.displayedQuestions && this.state.displayedQuestions.map(question => {\n      return /*#__PURE__*/React.createElement(QuestionPreview, {\n        question: question,\n        key: question.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 34\n        }\n      });\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clearfix mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 25\n      }\n    }))))), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }));\n  }\n\n} //mapStateToProps says take this global state and map these certain things to properties within this local state\n\n\nfunction mapStateToProps(state) {\n  //return whatever we want to pass from the global state into the properties\n  return {\n    allQuestions: state.allQuestions\n  };\n}\n\nexport default connect(mapStateToProps)(Questions);","map":{"version":3,"sources":["/Users/johncross/Desktop/10xCodeCamp/ask-a-teacher-fullstack/client/src/component/pages/Questions.js"],"names":["React","Header","Footer","orderBy","QuestionPreview","axios","connect","actions","Questions","Component","constructor","props","state","order","displayedQuestions","allQuestions","componentDidMount","get","then","res","questions","data","console","log","STORE_ALL_QUESTIONS","dispatch","type","payload","setState","map","question","totalAnswers","answers","length","catch","error","setOrder","e","newOrder","target","value","parsedNewOrder","JSON","parse","render","id","mapStateToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Header from \"../ui/Header\";\nimport Footer from \"../ui/Footer\";\nimport orderBy from \"lodash/orderBy\";\nimport QuestionPreview from \"../ui/QuestionPreview\";\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport actions from \"../../store/actions\";\n\n// import allQuestions from \"../../store/reducers/allQuestions\";\n\nclass Questions extends React.Component {\n   constructor(props) {\n      super(props);\n\n      this.state = {\n         order: `[[\"createdAt\"], [\"desc\"]]`,\n         displayedQuestions: [],\n         allQuestions: [],\n      };\n   }\n   //TODO: CREATE LOGOUT BUTTON ON ALL PAGES EXCEPT LANDING MAYBE\n   componentDidMount() {\n      axios\n         .get(\n            \"http://localhost:3040/api/v1/questions?order=%60questions%60.%60created_at%60%20DESC\"\n         )\n         .then((res) => {\n            // handle success\n            const questions = res.data;\n            console.log(`here are the questions: `, questions);\n\n            console.log(\"STORE ALL QUESTIONS\", actions.STORE_ALL_QUESTIONS);\n            this.props.dispatch({\n               type: actions.STORE_ALL_QUESTIONS,\n               payload: questions,\n            }); //this loads the questions\n            this.setState({\n               displayedQuestions: orderBy(\n                  this.props.allQuestions,\n                  '[[\"totalAnswers\"], [\"asc\"]]'\n               ),\n               allQuestions: this.props.allQuestions.map((question) => {\n                  return {\n                     totalAnswers: question.answers.length,\n                     ...question,\n                  };\n               }),\n            });\n         })\n         .catch((error) => {\n            // handle error\n            console.log(error);\n         });\n   }\n\n   //REMEMBER THAT STATE IS ALWAYS AN OBJECT\n\n   setOrder(e) {\n      const newOrder = e.target.value; // '[(question) => {return question.answers.length}, [\"asc\"]]'\n      console.log(newOrder);\n      const parsedNewOrder = JSON.parse(newOrder);\n      console.log(parsedNewOrder);\n      this.setState({ order: newOrder }, () => {\n         this.setState({\n            displayedQuestions: orderBy(\n               this.state.allQuestions,\n               ...parsedNewOrder // [(question) => {return question.answers.length}, [\"asc\"]]\n            ),\n         });\n      });\n   }\n\n   render() {\n      return (\n         <>\n            <Header />\n            <div className=\"container mb-9\">\n               <div className=\"row no-gutters\">\n                  <div className=\"col-12 col-md-10 offset-md-1 col-lg-8 offset-lg-2 col-xl-8 offset-xl-2 mt-9\">\n                     <div className=\"col-12 mt-6\">\n                        <h1 className=\"float-left top-questions\">\n                           Top Questions\n                        </h1>\n\n                        <select\n                           value={this.state.order}\n                           className=\"float-right dropdown col-5 form-control pl-0 form-control-lg\"\n                           onChange={(e) => this.setOrder(e)}\n                        >\n                           <option value='[[\"createdAt\"], [\"asc\"]]'>\n                              Newest\n                           </option>\n                           <option value='[[\"totalAnswers\"], [\"asc\"]]'>\n                              Unanswered\n                           </option>\n                        </select>\n\n                        <div className=\"clearfix\"></div>\n\n                        {this.state.displayedQuestions &&\n                           this.state.displayedQuestions.map((question) => {\n                              return (\n                                 <QuestionPreview\n                                    question={question}\n                                    key={question.id}\n                                 />\n                              );\n                           })}\n\n                        <div className=\"clearfix mb-4\"></div>\n                     </div>\n                  </div>\n               </div>\n            </div>\n            <Footer />\n         </>\n      );\n   }\n}\n\n//mapStateToProps says take this global state and map these certain things to properties within this local state\nfunction mapStateToProps(state) {\n   //return whatever we want to pass from the global state into the properties\n   return {\n      allQuestions: state.allQuestions,\n   };\n}\n\nexport default connect(mapStateToProps)(Questions);\n"]},"metadata":{},"sourceType":"module"}